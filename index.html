<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>VimSplit File Viewer</title>
  <style>
    :root{
      --bg:#0b1020;
      --panel: rgba(255,255,255,0.05);
      --panel2: rgba(255,255,255,0.08);
      --border: rgba(255,255,255,0.12);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.62);
      --accent: #8b5cf6;
      --good: #22c55e;
      --bad: #ef4444;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      --shadow: 0 18px 55px rgba(0,0,0,0.35);
      --radius: 14px;
      --statusH: 28px;
      --cmdH: 34px;
    }

    *{ box-sizing:border-box; }
    html, body { height:100%; }
    body{
      margin:0;
      font-family: var(--sans);
      color: var(--text);
      background:
        radial-gradient(900px 500px at 15% 20%, rgba(139,92,246,0.35), transparent 55%),
        radial-gradient(800px 600px at 85% 35%, rgba(34,197,94,0.18), transparent 60%),
        radial-gradient(600px 500px at 50% 85%, rgba(59,130,246,0.14), transparent 60%),
        var(--bg);
      overflow:hidden;
    }

    .app{
      height:100%;
      display:flex;
      flex-direction:column;
      padding: 14px;
      gap: 12px;
    }

    .topbar{
      height: 44px;
      border: 1px solid var(--border);
      background: rgba(0,0,0,0.28);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      display:flex;
      align-items:center;
      padding: 0 14px;
      gap: 12px;
      flex: 0 0 auto;
    }

    .brand{
      font-weight: 750;
      letter-spacing: 0.2px;
      font-size: 14px;
    }
    .hint{
      font-family: var(--mono);
      font-size: 12px;
      color: var(--muted);
      overflow:hidden;
      white-space:nowrap;
      text-overflow:ellipsis;
    }
    .spacer{ flex:1; }
    .pill{
      font-family: var(--mono);
      font-size: 11px;
      padding: 6px 9px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.05);
      color: rgba(255,255,255,0.86);
      user-select:none;
    }

    /* Workspace */
    .workspaceWrap{
      position: relative;
      flex: 1 1 auto;
      min-height: 0; /* allow children to scroll */
      border: 1px solid var(--border);
      background: rgba(0,0,0,0.28);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .workspace{
      position:absolute;
      inset:0;
      padding: 10px;
      display:flex;
      flex-direction:column;
      gap: 10px;
      min-height: 0;
    }

    /* Split rendering */
    .split{
      display:flex;
      min-height:0;
      min-width:0;
      flex: 1 1 auto;
      gap: 10px;
    }
    .split.v{ flex-direction: row; }
    .split.h{ flex-direction: column; }

    /* Pane */
    .pane{
      flex: 1 1 0;
      min-width: 0;
      min-height: 0;
      border: 1px solid var(--border);
      border-radius: 14px;
      background: rgba(255,255,255,0.03);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      position:relative;
    }
    .pane.focused{
      border-color: rgba(139,92,246,0.55);
      box-shadow: 0 0 0 1px rgba(139,92,246,0.25) inset;
    }

    .statusline{
      height: var(--statusH);
      flex: 0 0 auto;
      display:flex;
      align-items:center;
      gap:10px;
      padding: 0 10px;
      border-bottom: 1px solid rgba(255,255,255,0.08);
      background: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
      user-select:none;
    }
    .statusLeft{
      display:flex;
      align-items:center;
      gap:10px;
      min-width:0;
    }
    .wid{
      font-family: var(--mono);
      font-size: 12px;
      padding: 3px 7px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(0,0,0,0.18);
      color: rgba(255,255,255,0.88);
      flex: 0 0 auto;
    }
    .wtype{
      font-family: var(--mono);
      font-size: 11px;
      padding: 3px 7px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.05);
      color: rgba(255,255,255,0.82);
      flex: 0 0 auto;
    }
    .wtype.explorer{ border-color: rgba(34,197,94,0.30); background: rgba(34,197,94,0.10); }
    .wtype.viewer{ border-color: rgba(139,92,246,0.30); background: rgba(139,92,246,0.10); }
    .wtype.empty{ border-color: rgba(255,255,255,0.18); background: rgba(255,255,255,0.04); }

    .wtitle{
      font-family: var(--mono);
      font-size: 12px;
      color: var(--muted);
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
      min-width: 0;
    }
    .statusRight{
      margin-left:auto;
      font-family: var(--mono);
      font-size: 11px;
      color: rgba(255,255,255,0.55);
      display:flex;
      gap: 10px;
    }

    .content{
      flex: 1 1 auto;
      min-height:0;
      overflow:auto;
      padding: 10px;
    }

    /* Empty pane */
    .emptyMsg{
      font-family: var(--mono);
      color: var(--muted);
      font-size: 13px;
      line-height: 1.55;
      border: 1px dashed rgba(255,255,255,0.16);
      border-radius: 12px;
      padding: 12px;
      background: rgba(255,255,255,0.02);
    }
    .kbd{
      font-family: var(--mono);
      font-size: 12px;
      padding: 2px 6px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(0,0,0,0.22);
      color: rgba(255,255,255,0.86);
      white-space:nowrap;
    }

    /* Explorer */
    .explorerHeader{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 10px;
    }
    .cwd{
      font-family: var(--mono);
      font-size: 12px;
      color: var(--muted);
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .smallHint{
      font-family: var(--mono);
      font-size: 11px;
      color: rgba(255,255,255,0.55);
      white-space:nowrap;
    }
    .list{
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: 12px;
      overflow:hidden;
    }
    .entry{
      display:flex;
      align-items:center;
      gap:10px;
      padding: 10px 10px;
      border-top: 1px solid rgba(255,255,255,0.06);
      cursor: default;
      user-select:none;
    }
    .entry:first-child{ border-top:0; }
    .entry .icon{
      width: 30px; height: 30px;
      border-radius: 10px;
      display:grid;
      place-items:center;
      font-family: var(--mono);
      font-size: 11px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.18);
      flex: 0 0 auto;
    }
    .icon.dir{ border-color: rgba(34,197,94,0.32); background: rgba(34,197,94,0.12); }
    .icon.file{ border-color: rgba(139,92,246,0.32); background: rgba(139,92,246,0.12); }
    .entry .name{
      min-width:0;
      font-family: var(--mono);
      font-size: 13px;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .entry .meta{
      margin-left:auto;
      font-family: var(--mono);
      font-size: 11px;
      color: rgba(255,255,255,0.55);
      flex: 0 0 auto;
    }
    .entry.selected{
      background: rgba(139,92,246,0.14);
      outline: 1px solid rgba(139,92,246,0.30);
    }
    .entry.selected .meta{ color: rgba(255,255,255,0.78); }

    /* Viewer */
    iframe{
      width:100%;
      height:100%;
      border:0;
      display:block;
      background: rgba(0,0,0,0.12);
    }
    pre{
      margin:0;
      font-family: var(--mono);
      font-size: 13px;
      line-height: 1.6;
      white-space: pre-wrap;
      word-break: break-word;
    }

    /* Command line */
    .cmdline{
      position:absolute;
      left: 16px;
      right: 16px;
      bottom: 14px;
      height: var(--cmdH);
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(0,0,0,0.55);
      backdrop-filter: blur(10px);
      display:flex;
      align-items:center;
      gap: 10px;
      padding: 0 12px;
      box-shadow: 0 10px 35px rgba(0,0,0,0.35);
      font-family: var(--mono);
      font-size: 13px;
      color: rgba(255,255,255,0.90);
    }
    .cmdline.hidden{ display:none; }
    .cmdprompt{ color: rgba(255,255,255,0.78); }
    .cmdtext{
      flex: 1;
      min-width:0;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .cmderr{
      color: rgba(239,68,68,0.90);
      font-size: 12px;
      margin-left:auto;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 45%;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="topbar">
      <div class="brand">VimFEx</div>
      <div id="globalHint" class="hint"></div>
      <div class="spacer"></div>
      <div id="modePill" class="pill">NORMAL</div>
      <div class="pill">Ctrl+N explorer</div>
      <div class="pill">: spl | vspl | q</div>
      <div class="pill">j/k + Enter</div>
      <div class="pill">Ctrl+B up</div>
      <div class="pill">Ctrl+1..9 focus</div>
    </div>

    <div class="workspaceWrap">
      <div class="workspace" id="workspace"></div>

      <div class="cmdline hidden" id="cmdline">
        <div class="cmdprompt">:</div>
        <div class="cmdtext" id="cmdtext"></div>
        <div class="cmderr" id="cmderr"></div>
      </div>
    </div>
  </div>

<script type="module" src="/index.js"></script>
</body>
</html>
